<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>drawing_shapes</title>

    <style type="text/css">
    </style>


</head>
<body>
<canvas height="600" width="1000" id="canvas"/>

<script type="text/javascript">
    function Point(x, y) {
        this.x = x;
        this.y = y;
    }

    function Line(p1, p2) {
        this.p1 = p1;
        this.p2 = p2;
        this.length = Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));
    }

    function Shape() {
        this.points = [];
        this.lines = [];
        this.init();
    }

    Shape.prototype = {
        // reset pointer to constructor
        constructor: Shape,
        // initialization, sets this.context to point
        // to the context of the canvas object
        init: function () {
            if (typeof this.context === 'undefined') {
                var canvas = document.getElementById('canvas');
                Shape.prototype.context = canvas.getContext('2d');
            }
        },
        // method that draws a shape by looping through this.points
        draw: function () {
            var ctx = this.context;
            ctx.strokeStyle = this.getColor();
            ctx.lineWidth = 4
            ctx.beginPath();
            ctx.moveTo(this.center.x + this.points[0].x, this.center.y + this.points[0].y);
            if (this.points.length == 1) {
                ctx.fillRect(this.center.x + this.points[0].x, this.center.y + this.points[0].y, 2, 2);
            }
            else {
                for (var i = 1; i < this.points.length; i++) {
                    ctx.lineTo(this.center.x + this.points[i].x, this.center.y + this.points[i].y);
                }
            }

            ctx.closePath();
            ctx.stroke();
        },
        // method that generates a random color
        getColor: function () {
            var rgb = [];
            for (var i = 0; i < 3; i++) {
                rgb[i] = Math.round(255 * Math.random());
            }
            return 'rgb(' + rgb.join(',') + ')';
        },
        // method that loops through the points array,
        // creates Line instances and adds them to this.lines
        getLines: function () {
            if (this.lines.length > 0) {
                return this.lines;
            }
            var lines = [];
            for (var i = 0; i < this.points.length; i++) {
                lines[i] = new Line(this.points[i], (this.points[i + 1]) ? this.points[i + 1] : this.points[0]);
            }
            this.lines = lines;
            return lines;
        },
        // shell method, to be implemented by children
        getArea: function () {
        },
        // sums the lengths of all lines
        getPerimeter: function () {
            var lines = this.getLines();
            var perim = 0;
            for (var i = 0; i < lines.length; i++) {
                perim += lines[i].length;
            }
            return perim;
        }

    }

    function Triangle(center, a, b, c) {
        this.center = center
        this.points = [a, b, c];
        this.getArea = function () {
            var p = this.getPerimeter();
            var s = p / 2;
            return Math.sqrt(
                            s
                            * (s - this.lines[0].length)
                            * (s - this.lines[1].length)
                            * (s - this.lines[2].length)
            );
        };
    }

    function Rectangle(center, p, side_a, side_b) {
        this.center = center
        a = p
        b = new Point(a.x, a.y + side_b)
        c = new Point(a.x + side_a, b.y)
        d = new Point(c.x, c.y - side_b)
        this.points = [a, b, c, d]
    }

    function Square(center, p, side) {
        return new Rectangle(center, p, side, side)
    }

    function Polygon(center, width, points) {
        this.center = center
        theta = 2 * Math.PI / points

        this.points = []
        var x, y
        for (var i = 0.5; i < points; ++i) {
            x = (width / 2) * Math.cos(i * theta)
            y = (width / 2) * Math.sin(i * theta)
            this.points.push(new Point(x, y))
        }
    }

    /* Inheritance */
    (function () {
        var s = new Shape();
        Triangle.prototype = s;
        Rectangle.prototype = s;
        Square.prototype = s;
        Polygon.prototype = s;
    })()

    try {
        var p1 = new Point(100, 100)
        var p2 = new Point(300, 100)
        var p3 = new Point(200, 0);

        var center = new Point(100, 200)
        new Triangle(center, p1, p2, p3).draw()
        new Rectangle(center, new Point(200, 200), 50, 100).draw()
        new Square(center, new Point(130, 130), 50).draw()
        new Square(center, p1, 200).draw()

        for (var i = 1; i < 20; ++i) {
            new Polygon(new Point(i * 50, 100), 50, i).draw()
        }
    }
    catch (e) {
        alert(e)
    }
</script>

</body>
</html>